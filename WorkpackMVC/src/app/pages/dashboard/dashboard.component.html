<div *ngIf="dashBoardGridData">
  <div class="portlet light portlet-fit bordered">
    <div class="portlet-title">
      <div class="caption">
        <span class="caption-subject font-red sbold uppercase">Ongoing Projects</span>
      </div>
      <div class="actions">
        Test
      </div>
    </div>
    <div class="portlet-body">
      <div class="table-scrollable table-scrollable-borderless">
        <table class="table table-hover table-light">
          <thead class="fixed-header">
          <tr class="uppercase">
            <th class="col-sm-1 dashboard-heading">Manage</th>
            <th class="col-sm-2 dashboard-heading">Project Name</th>
            <th class="col-sm-1 dashboard-heading">Project Code</th>
            <th class="col-sm-2 dashboard-heading">Project Manager</th>
            <th class="col-sm-6 dashboard-heading">Progress Roadmap</th>
          </tr>
          </thead>
          <tbody class="dashboard-table-body">
          <tr *ngFor="let gridData of dashBoardGridData; let dashBoardGridDataIndex=index;"
              [ngStyle]="initializeLeft()">
            <td class="col-sm-1">
              <div class="btn-group">
                <a class="btn btn-sm default" href="javascript:void(0)" data-toggle="dropdown" aria-expanded="false">
                  <i class="fa fa-edit"></i>
                  <i class="fa fa-angle-down"></i>
                </a>
                <ul class="dropdown-menu">
                  <li *ngIf="dashBoardMenuListAccess && dashBoardMenuListAccess.liViewdetails">
                    <a href="javascript:void(0)">
                      <i class="fa fa-eye"></i> View Details </a>
                  </li>
                  <li *ngIf="dashBoardMenuListAccess && dashBoardMenuListAccess.liEditTask">
                    <a href="javascript:void(0)">
                      <i class="fa fa-edit"></i> Task List </a>
                  </li>
                  <li *ngIf="dashBoardMenuListAccess && dashBoardMenuListAccess.liEditMaterialTask">
                    <a href="javascript:void(0)">
                      <i class="fa fa-edit"></i> Material List </a>
                  </li>
                  <li *ngIf="dashBoardMenuListAccess && dashBoardMenuListAccess.liEditDocumentTask">
                    <a href="javascript:void(0)">
                      <i class="fa fa-edit"></i> Document List </a>
                  </li>
                  <li *ngIf="dashBoardMenuListAccess && dashBoardMenuListAccess.liSchedule">
                    <a href="javascript:void(0)">
                      <i class="fa fa-calendar"></i> Schedule </a>
                  </li>
                </ul>
              </div>
            </td>
            <td class="col-sm-2">{{gridData.ProjectName}}</td>
            <td class="col-sm-1">{{gridData.ProjectCode}}</td>
            <td class="col-sm-2">{{gridData.ProjectLeader}}</td>
            <td class="col-sm-6" *ngIf="gridData.RoadmapData && (gridData.RoadmapData.length == 0)">Project Roadmap not
              defined.
            </td>
            <td class="col-sm-6" *ngIf="gridData.RoadmapData && (gridData.RoadmapData.length > 0)">
              <div class="cd-horizontal-timeline mt-timeline-horizontal loaded">
                <div class="timeline">
                  <div class="events-wrapper">
                    <div class="events" style="width: 1800px; margin: 0 6px 0 6px;transform: translateX(0px);"
                         [ngStyle]="lineMoment">
                      <ol [ngStyle]="lineColoring(dashBoardGridDataIndex)">
                        <li
                          [ngClass]="{
                            'active': !roadMapDataIndex,
                            'previous-page': gridData.currentPage === roadMapDataIndex + 1,
                            'current-page': gridData.currentPage === roadMapDataIndex,
                            'next-page': gridData.currentPage === roadMapDataIndex - 1
                         }"
                          *ngFor="let roadmapData of gridData.RoadmapData;let roadMapDataIndex = index;">
                          <span *ngIf="(roadMapDataIndex % 1 == 0)">
                              <a data-toggle="modal" href="#myModal"
                                 (click)="getMilestoneData(roadmapData.ProjectID, roadmapData.ProjectTaskID, roadmapData.TaskTypeID,roadmapData.StartDate,gridData.ProjectName,roadmapData.TaskName)"
                                 [ngClass]="(roadMapDataIndex == 0)?(roadmapData.DummyText == 'G')?'border-after-green bg-after-green':(roadmapData.DummyText == 'R')?'border-after-yellow bg-after-yellow':'border-after-red bg-after-red':
                                 (roadmapData.ActualEndDate)?'border-after-green bg-after-green':(roadmapData.Delay <= 0)?'border-after-yellow bg-after-yellow':'border-after-red bg-after-red'"
                                 [ngStyle]="circleSpacing(roadMapDataIndex)"
                                 [attr.title]="roadmapData.TaskName"></a>
                          </span>
                        </li>
                      </ol>
                      <span class="filling-line bg-green" aria-hidden="true" [ngStyle]="this.lineScale"></span>
                    </div>
                  </div>
                  <ul class="cd-timeline-navigation mt-ht-nav-icon">
                    <li (click)="previousPage(dashBoardGridDataIndex)">
                      <a href="javascript:void(0);" class="prev btn btn-outline red md-skip"
                         [attr.disabled]="gridData.currentPage == 0?true:null">
                        <i class="fa fa-chevron-left"></i>
                      </a>
                    </li>
                    <li (click)="nextPage(dashBoardGridDataIndex, gridData.RoadmapData.length)">
                      <a href="javascript:void(0);" class="next btn btn-outline red md-skip"
                         [attr.disabled]="((gridData.currentPage + 1) >= gridData.RoadmapData.length)?true:null">
                        <i class="fa fa-chevron-right"></i>
                      </a>
                    </li>
                  </ul>
                  <!-- .cd-timeline-navigation -->
                </div>
                <!-- .timeline -->
                <!-- .events-content -->
              </div>
            </td>
          </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
<!-- Modal -->
<div class="modal fade draggable-modal ui-draggable in ui-draggable-dragging" id="myModal" role="basic"
     aria-hidden="true">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header ui-draggable-handle" draggable="true">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title"><strong>Milestone Details for "{{modalTaskName}}" in "{{modalProjectName}}"</strong>
        </h4>
      </div>
      <div class="modal-body">
        Planned : {{modalPlannedDate}}
        <br>
        <strong>Checklist for {{modalTaskName}}</strong>
        <div [innerHTML]="vStr | safeHtml"></div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>

  </div>
</div>
